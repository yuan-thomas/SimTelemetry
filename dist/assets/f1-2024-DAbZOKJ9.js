var Mt=(c=>(c[c.MOTION=0]="MOTION",c[c.SESSION=1]="SESSION",c[c.LAP_DATA=2]="LAP_DATA",c[c.EVENT=3]="EVENT",c[c.PARTICIPANTS=4]="PARTICIPANTS",c[c.CAR_SETUPS=5]="CAR_SETUPS",c[c.CAR_TELEMETRY=6]="CAR_TELEMETRY",c[c.CAR_STATUS=7]="CAR_STATUS",c[c.FINAL_CLASSIFICATION=8]="FINAL_CLASSIFICATION",c[c.LOBBY_INFO=9]="LOBBY_INFO",c[c.CAR_DAMAGE=10]="CAR_DAMAGE",c[c.SESSION_HISTORY=11]="SESSION_HISTORY",c[c.TYRE_SETS=12]="TYRE_SETS",c[c.MOTION_EX=13]="MOTION_EX",c[c.TIME_TRIAL=14]="TIME_TRIAL",c))(Mt||{});class bt{decode(t){if(t.byteLength<29)return console.warn("F1 decoder: Buffer too small for packet header"),null;const r=new DataView(t);let s=0;try{const e=this.readPacketHeader(r,s);switch(s+=29,e.packetId){case 0:return this.decodeMotionPacket(r,s,e);case 1:return this.decodeSessionPacket(r,s,e);case 2:return this.decodeLapDataPacket(r,s,e);case 3:return this.decodeEventPacket(r,s,e);case 4:return this.decodeParticipantsPacket(r,s,e);case 5:return this.decodeCarSetupsPacket(r,s,e);case 6:return this.decodeTelemetryPacket(r,s,e);case 7:return this.decodeCarStatusPacket(r,s,e);case 8:return this.decodeFinalClassificationPacket(r,s,e);case 9:return this.decodeLobbyInfoPacket(r,s,e);case 10:return this.decodeCarDamagePacket(r,s,e);case 11:return this.decodeSessionHistoryPacket(r,s,e);case 12:return this.decodeTyreSetsPacket(r,s,e);case 13:return this.decodeMotionExPacket(r,s,e);case 14:return this.decodeTimeTrialPacket(r,s,e);default:return this.createBasicFrame(e)}}catch(e){return console.error("F1 decoder error:",e),null}}readPacketHeader(t,r){return{packetFormat:t.getUint16(r,!0),gameYear:t.getUint8(r+2),gameMajorVersion:t.getUint8(r+3),gameMinorVersion:t.getUint8(r+4),packetVersion:t.getUint8(r+5),packetId:t.getUint8(r+6),sessionUID:t.getBigUint64(r+7,!0),sessionTime:t.getFloat32(r+15,!0),frameIdentifier:t.getUint32(r+19,!0),overallFrameIdentifier:t.getUint32(r+23,!0),playerCarIndex:t.getUint8(r+27),secondaryPlayerCarIndex:t.getUint8(r+28)}}decodeMotionPacket(t,r,s){let n=r+s.playerCarIndex*60;if(n+60>t.byteLength)return console.warn("F1 decoder: Motion packet too small for CarMotionData"),null;const a=t.getFloat32(n,!0);n+=4;const o=t.getFloat32(n,!0);n+=4;const l=t.getFloat32(n,!0);n+=4;const g=t.getFloat32(n,!0);n+=4;const U=t.getFloat32(n,!0);n+=4;const m=t.getFloat32(n,!0);n+=4;const p=t.getInt16(n,!0)/32767;n+=2;const d=t.getInt16(n,!0)/32767;n+=2;const f=t.getInt16(n,!0)/32767;n+=2;const u=t.getInt16(n,!0)/32767;n+=2;const F=t.getInt16(n,!0)/32767;n+=2;const y=t.getInt16(n,!0)/32767;n+=2;const S=t.getFloat32(n,!0);n+=4;const L=t.getFloat32(n,!0);n+=4;const T=t.getFloat32(n,!0);n+=4;const I=t.getFloat32(n,!0);n+=4;const R=t.getFloat32(n,!0);n+=4;const i=t.getFloat32(n,!0);return{...this.headerToFrame(s),packet_type:0,worldPositionX:a,worldPositionY:o,worldPositionZ:l,worldVelocityX:g,worldVelocityY:U,worldVelocityZ:m,worldForwardDirX:p,worldForwardDirY:d,worldForwardDirZ:f,worldRightDirX:u,worldRightDirY:F,worldRightDirZ:y,gForceLateral:S,gForceLongitudinal:L,gForceVertical:T,yaw:I,pitch:R,roll:i}}decodeTelemetryPacket(t,r,s){let n=r+s.playerCarIndex*60;if(n+60>t.byteLength)return console.warn("F1 decoder: Telemetry packet too small"),null;const a=t.getUint16(n,!0);n+=2;const o=t.getFloat32(n,!0);n+=4;const l=t.getFloat32(n,!0);n+=4;const g=t.getFloat32(n,!0);n+=4;const U=t.getUint8(n);n+=1;const m=t.getInt8(n);n+=1;const p=t.getUint16(n,!0);n+=2;const d=t.getUint8(n);n+=1;const f=t.getUint8(n);n+=1;const u=t.getUint16(n,!0);n+=2;const F=t.getUint16(n,!0);n+=2;const y=t.getUint16(n,!0);n+=2;const S=t.getUint16(n,!0);n+=2;const L=t.getUint16(n,!0);n+=2;const T=t.getUint8(n);n+=1;const I=t.getUint8(n);n+=1;const R=t.getUint8(n);n+=1;const i=t.getUint8(n);n+=1;const C=t.getUint8(n);n+=1;const k=t.getUint8(n);n+=1;const P=t.getUint8(n);n+=1;const A=t.getUint8(n);n+=1;const h=t.getUint16(n,!0);n+=2;const M=t.getFloat32(n,!0);n+=4;const b=t.getFloat32(n,!0);n+=4;const O=t.getFloat32(n,!0);n+=4;const E=t.getFloat32(n,!0);n+=4;const _=t.getUint8(n);n+=1;const x=t.getUint8(n);n+=1;const V=t.getUint8(n);n+=1;const N=t.getUint8(n);return{...this.headerToFrame(s),packet_type:6,speed:a,throttle:o,steer:l,brake:g,clutch:U,gear:m,engineRPM:p,drs:d,revLightsPercent:f,revLightsBitValue:u,brakesTemperatureRL:F,brakesTemperatureRR:y,brakesTemperatureFL:S,brakesTemperatureFR:L,tyresSurfaceTemperatureRL:T,tyresSurfaceTemperatureRR:I,tyresSurfaceTemperatureFL:R,tyresSurfaceTemperatureFR:i,tyresInnerTemperatureRL:C,tyresInnerTemperatureRR:k,tyresInnerTemperatureFL:P,tyresInnerTemperatureFR:A,engineTemperature:h,tyresPressureRL:M,tyresPressureRR:b,tyresPressureFL:O,tyresPressureFR:E,surfaceTypeRL:_,surfaceTypeRR:x,surfaceTypeFL:V,surfaceTypeFR:N}}decodeLapDataPacket(t,r,s){let n=r+s.playerCarIndex*53;if(n+53>t.byteLength)return console.warn("F1 decoder: Lap data packet too small"),null;const a=t.getUint32(n,!0);n+=4;const o=t.getUint32(n,!0);n+=4;const l=t.getUint16(n,!0);n+=2;const g=t.getUint8(n);n+=1;const U=t.getUint16(n,!0);n+=2;const m=t.getUint8(n);n+=1;const p=t.getUint16(n,!0);n+=2,n+=1;const d=t.getUint16(n,!0);n+=2,n+=1;const f=t.getFloat32(n,!0);n+=4;const u=t.getFloat32(n,!0);n+=4;const F=t.getFloat32(n,!0);n+=4;const y=t.getUint8(n);n+=1;const S=t.getUint8(n);n+=1;const L=t.getUint8(n);n+=1;const T=t.getUint8(n);n+=1;const I=t.getUint8(n);n+=1;const R=t.getUint8(n);n+=1;const i=t.getUint8(n);n+=1;const C=t.getUint8(n);n+=1;const k=t.getUint8(n);n+=1;const P=t.getUint8(n);n+=1;const A=t.getUint8(n);n+=1;const h=t.getUint8(n);n+=1;const M=t.getUint8(n);n+=1;const b=t.getUint8(n);n+=1;const O=t.getUint8(n);n+=1;const E=t.getUint16(n,!0);n+=2;const _=t.getUint16(n,!0);n+=2;const x=t.getUint8(n);n+=1;const V=t.getFloat32(n,!0);n+=4;const N=t.getUint8(n);return{...this.headerToFrame(s),packet_type:2,lastLapTimeInMS:a,currentLapTimeInMS:o,sector1TimeInMS:l,sector1TimeMinutes:g,sector2TimeInMS:U,sector2TimeMinutes:m,deltaToCarInFrontInMS:p,deltaToRaceLeaderInMS:d,lapDistance:f,totalDistance:u,safetyCarDelta:F,carPosition:y,currentLapNum:S,pitStatus:L,numPitStops:T,sector:I,currentLapInvalid:R,penalties:i,totalWarnings:C,cornerCuttingWarnings:k,numUnservedDriveThroughPens:P,numUnservedStopGoPens:A,gridPosition:h,driverStatus:M,resultStatus:b,pitLaneTimerActive:O,pitLaneTimeInLaneInMS:E,pitStopTimerInMS:_,pitStopShouldServePen:x,speedTrapFastestSpeed:V,speedTrapFastestLap:N}}decodeCarStatusPacket(t,r,s){let n=r+s.playerCarIndex*47;if(n+47>t.byteLength)return console.warn("F1 decoder: Car status packet too small"),null;const a=t.getUint8(n);n+=1;const o=t.getUint8(n);n+=1;const l=t.getUint8(n);n+=1;const g=t.getUint8(n);n+=1;const U=t.getUint8(n);n+=1;const m=t.getFloat32(n,!0);n+=4;const p=t.getFloat32(n,!0);n+=4;const d=t.getFloat32(n,!0);n+=4;const f=t.getUint16(n,!0);n+=2;const u=t.getUint16(n,!0);n+=2;const F=t.getUint8(n);n+=1;const y=t.getUint8(n);n+=1;const S=t.getUint16(n,!0);n+=2;const L=t.getUint8(n);n+=1;const T=t.getUint8(n);n+=1;const I=t.getUint8(n);n+=1;const R=t.getInt8(n);n+=1;const i=t.getFloat32(n,!0);n+=4;const C=t.getFloat32(n,!0);n+=4;const k=t.getFloat32(n,!0);n+=4;const P=t.getUint8(n);n+=1;const A=t.getFloat32(n,!0);n+=4;const h=t.getFloat32(n,!0);n+=4;const M=t.getFloat32(n,!0);n+=4;const b=t.getUint8(n);return{...this.headerToFrame(s),packet_type:7,tractionControl:a,antiLockBrakes:o,fuelMix:l,frontBrakeBias:g,pitLimiterStatus:U,fuelInTank:m,fuelCapacity:p,fuelRemainingLaps:d,maxRPM:f,idleRPM:u,maxGears:F,drsAllowed:y,drsActivationDistance:S,actualTyreCompound:L,visualTyreCompound:T,tyresAgeLaps:I,vehicleFiaFlags:R,enginePowerICE:i,enginePowerMGUK:C,ersStoreEnergy:k,ersDeployMode:P,ersHarvestedThisLapMGUK:A,ersHarvestedThisLapMGUH:h,ersDeployedThisLap:M,networkPaused:b}}decodeSessionPacket(t,r,s){let e=r;if(e+724>t.byteLength)return console.warn("F1 decoder: Session packet too small"),null;const n=t.getUint8(e);e+=1;const a=t.getInt8(e);e+=1;const o=t.getInt8(e);e+=1;const l=t.getUint8(e);e+=1;const g=t.getUint16(e,!0);e+=2;const U=t.getUint8(e);e+=1;const m=t.getInt8(e);e+=1;const p=t.getUint8(e);e+=1;const d=t.getUint16(e,!0);e+=2;const f=t.getUint16(e,!0);e+=2;const u=t.getUint8(e);e+=1;const F=t.getUint8(e);e+=1;const y=t.getUint8(e);e+=1;const S=t.getUint8(e);e+=1;const L=t.getUint8(e);e+=1;const T=t.getUint8(e);e+=1;const I=[];for(let D=0;D<21;D++)I.push({zoneStart:t.getFloat32(e,!0),zoneFlag:t.getInt8(e+4)}),e+=5;const R=t.getUint8(e);e+=1;const i=t.getUint8(e);e+=1;const C=t.getUint8(e);e+=1;const k=[];for(let D=0;D<64;D++)k.push({sessionType:t.getUint8(e),timeOffset:t.getUint8(e+1),weather:t.getUint8(e+2),trackTemperature:t.getInt8(e+3),trackTemperatureChange:t.getInt8(e+4),airTemperature:t.getInt8(e+5),airTemperatureChange:t.getInt8(e+6),rainPercentage:t.getUint8(e+7)}),e+=8;const P=t.getUint8(e);e+=1;const A=t.getUint8(e);e+=1;const h=t.getUint32(e,!0);e+=4;const M=t.getUint32(e,!0);e+=4;const b=t.getUint32(e,!0);e+=4;const O=t.getUint8(e);e+=1;const E=t.getUint8(e);e+=1;const _=t.getUint8(e);e+=1;const x=t.getUint8(e);e+=1;const V=t.getUint8(e);e+=1;const N=t.getUint8(e);e+=1;const B=t.getUint8(e);e+=1;const W=t.getUint8(e);e+=1;const Y=t.getUint8(e);e+=1;const H=t.getUint8(e);e+=1;const G=t.getUint8(e);e+=1;const X=t.getUint8(e);e+=1;const Z=t.getUint8(e);e+=1;const j=t.getUint8(e);e+=1;const z=t.getUint32(e,!0);e+=4;const K=t.getUint8(e);e+=1;const $=t.getUint8(e);e+=1;const q=t.getUint8(e);e+=1;const J=t.getUint8(e);e+=1;const Q=t.getUint8(e);e+=1;const w=t.getUint8(e);e+=1;const v=t.getUint8(e);e+=1;const tt=t.getUint8(e);e+=1;const et=t.getUint8(e);e+=1;const nt=t.getUint8(e);e+=1;const ot=t.getUint8(e);e+=1;const rt=t.getUint8(e);e+=1;const at=t.getUint8(e);e+=1;const ct=t.getUint8(e);e+=1;const gt=t.getUint8(e);e+=1;const lt=t.getUint8(e);e+=1;const ut=t.getUint8(e);e+=1;const it=t.getUint8(e);e+=1;const Ut=t.getUint8(e);e+=1;const pt=t.getUint8(e);e+=1;const dt=t.getUint8(e);e+=1;const mt=t.getUint8(e);e+=1;const ft=t.getUint8(e);e+=1;const Ft=t.getUint8(e);e+=1;const yt=t.getUint8(e);e+=1;const St=t.getUint8(e);e+=1;const Lt=t.getUint8(e);e+=1;const ht=t.getUint8(e);e+=1;const Tt=t.getUint8(e);e+=1;const It=t.getUint8(e);e+=1;const Rt=t.getUint8(e);e+=1;const Ct=t.getUint8(e);e+=1;const kt=t.getUint8(e);e+=1;const st=[];for(let D=0;D<12;D++)st.push(t.getUint8(e+D));e+=12;const Pt=t.getFloat32(e,!0);e+=4;const At=t.getFloat32(e,!0);return{...this.headerToFrame(s),packet_type:1,weather:n,trackTemperature:a,airTemperature:o,totalLaps:l,trackLength:g,sessionType:U,trackId:m,formula:p,sessionTimeLeft:d,sessionDuration:f,pitSpeedLimit:u,gamePaused:F,isSpectating:y,spectatorCarIndex:S,sliProNativeSupport:L,numMarshalZones:T,marshalZones:I,safetyCarStatus:R,networkGame:i,numWeatherForecastSamples:C,weatherForecastSamples:k,forecastAccuracy:P,aiDifficulty:A,seasonLinkIdentifier:h,weekendLinkIdentifier:M,sessionLinkIdentifier:b,pitStopWindowIdealLap:O,pitStopWindowLatestLap:E,pitStopRejoinPosition:_,steeringAssist:x,brakingAssist:V,gearboxAssist:N,pitAssist:B,pitReleaseAssist:W,ERSAssist:Y,DRSAssist:H,dynamicRacingLine:G,dynamicRacingLineType:X,gameMode:Z,ruleSet:j,timeOfDay:z,sessionLength:K,speedUnitsLeadPlayer:$,temperatureUnitsLeadPlayer:q,speedUnitsSecondaryPlayer:J,temperatureUnitsSecondaryPlayer:Q,numSafetyCarPeriods:w,numVirtualSafetyCarPeriods:v,numRedFlagPeriods:tt,equalCarPerformance:et,recoveryMode:nt,flashbackLimit:ot,surfaceType:rt,lowFuelMode:at,raceStarts:ct,tyreTemperature:gt,pitLaneTyreSim:lt,carDamage:ut,carDamageRate:it,collisions:Ut,collisionsOffForFirstLapOnly:pt,mpUnsafePitRelease:dt,mpOffForGriefing:mt,cornerCuttingStringency:ft,parcFermeRules:Ft,pitStopExperience:yt,safetyCar:St,safetyCarExperience:Lt,formationLap:ht,formationLapExperience:Tt,redFlags:It,affectsLicenceLevelSolo:Rt,affectsLicenceLevelMP:Ct,numSessionsInWeekend:kt,weekendStructure:st,sector2LapDistanceStart:Pt,sector3LapDistanceStart:At}}headerToFrame(t){return{t:Date.now(),packetFormat:t.packetFormat,gameYear:t.gameYear,gameMajorVersion:t.gameMajorVersion,gameMinorVersion:t.gameMinorVersion,packetVersion:t.packetVersion,packetId:t.packetId,sessionUID:t.sessionUID.toString(),sessionTime:t.sessionTime,frameIdentifier:t.frameIdentifier,overallFrameIdentifier:t.overallFrameIdentifier,playerCarIndex:t.playerCarIndex,secondaryPlayerCarIndex:t.secondaryPlayerCarIndex}}decodeEventPacket(t,r,s){let e=r;if(e+7>t.byteLength)return console.warn("F1 decoder: Event packet too small"),null;const n=new Uint8Array(t.buffer,t.byteOffset+e,4),a=String.fromCharCode(...n);return e+=4,{...this.headerToFrame(s),packet_type:3,eventStringCode:a,eventDetails:{}}}decodeParticipantsPacket(t,r,s){let e=r;if(e+1>t.byteLength)return console.warn("F1 decoder: Participants packet too small"),null;const n=t.getUint8(e);e+=1;const a=e+s.playerCarIndex*56;if(a+56>t.byteLength)return console.warn("F1 decoder: Participants packet too small for player data"),null;let o=a;const l=t.getUint8(o);o+=1;const g=t.getUint8(o);o+=1;const U=t.getUint8(o);o+=1;const m=t.getUint8(o);o+=1;const p=t.getUint8(o);o+=1;const d=t.getUint8(o);o+=1;const f=t.getUint8(o);o+=1;const u=String.fromCharCode(...new Uint8Array(t.buffer,t.byteOffset+o,48)).replace(/\0+$/,"");o+=48;const F=t.getUint8(o);o+=1;const y=t.getUint8(o);o+=1;const S=t.getUint16(o,!0);o+=2;const L=t.getUint8(o);return{...this.headerToFrame(s),packet_type:4,numActiveCars:n,aiControlled:l,driverId:g,networkId:U,teamId:m,myTeam:p,raceNumber:d,nationality:f,name:u,yourTelemetry:F,showOnlineNames:y,techLevel:S,platform:L}}decodeCarSetupsPacket(t,r,s){const e=r+s.playerCarIndex*49;if(e+49>t.byteLength)return console.warn("F1 decoder: Car setups packet too small"),null;let n=e;const a=t.getUint8(n);n+=1;const o=t.getUint8(n);n+=1;const l=t.getUint8(n);n+=1;const g=t.getUint8(n);n+=1;const U=t.getFloat32(n,!0);n+=4;const m=t.getFloat32(n,!0);n+=4;const p=t.getFloat32(n,!0);n+=4;const d=t.getFloat32(n,!0);n+=4;const f=t.getUint8(n);n+=1;const u=t.getUint8(n);n+=1;const F=t.getUint8(n);n+=1;const y=t.getUint8(n);n+=1;const S=t.getUint8(n);n+=1;const L=t.getUint8(n);n+=1;const T=t.getUint8(n);n+=1;const I=t.getUint8(n);n+=1;const R=t.getFloat32(n,!0);n+=4;const i=t.getFloat32(n,!0);n+=4;const C=t.getFloat32(n,!0);n+=4;const k=t.getFloat32(n,!0);n+=4;const P=t.getUint8(n);n+=1;const A=t.getFloat32(n,!0);return{...this.headerToFrame(s),packet_type:5,frontWing:a,rearWing:o,onThrottle:l,offThrottle:g,frontCamber:U,rearCamber:m,frontToe:p,rearToe:d,frontSuspension:f,rearSuspension:u,frontAntiRollBar:F,rearAntiRollBar:y,frontSuspensionHeight:S,rearSuspensionHeight:L,brakePressure:T,brakeBias:I,rearLeftTyrePressure:R,rearRightTyrePressure:i,frontLeftTyrePressure:C,frontRightTyrePressure:k,ballast:P,fuelLoad:A}}decodeFinalClassificationPacket(t,r,s){let e=r;if(e+1>t.byteLength)return console.warn("F1 decoder: Final classification packet too small"),null;const n=t.getUint8(e);e+=1;const a=e+s.playerCarIndex*45;if(a+45>t.byteLength)return console.warn("F1 decoder: Final classification packet too small for player data"),null;let o=a;const l=[],g=[],U=[],m=t.getUint8(o);o+=1;const p=t.getUint8(o);o+=1;const d=t.getUint8(o);o+=1;const f=t.getUint8(o);o+=1;const u=t.getUint8(o);o+=1;const F=t.getUint8(o);o+=1;const y=t.getUint32(o,!0);o+=4;const S=t.getFloat64(o,!0);o+=8;const L=t.getUint8(o);o+=1;const T=t.getUint8(o);o+=1;const I=t.getUint8(o);o+=1;for(let i=0;i<8;i++)l.push(t.getUint8(o+i));o+=8;for(let i=0;i<8;i++)g.push(t.getUint8(o+i));o+=8;for(let i=0;i<8;i++)U.push(t.getUint8(o+i));return{...this.headerToFrame(s),packet_type:8,numCars:n,position:m,numLaps:p,gridPosition:d,points:f,numPitStops:u,resultStatus:F,bestLapTimeInMS:y,totalRaceTime:S,penaltiesTime:L,numPenalties:T,numTyreStints:I,tyreStintsActual:l,tyreStintsVisual:g,tyreStintsEndLaps:U}}decodeLobbyInfoPacket(t,r,s){let e=r;if(e+1>t.byteLength)return console.warn("F1 decoder: Lobby info packet too small"),null;const n=t.getUint8(e);e+=1;const a=e+s.playerCarIndex*54;if(a+54>t.byteLength)return console.warn("F1 decoder: Lobby info packet too small for player data"),null;let o=a;const l=t.getUint8(o);o+=1;const g=t.getUint8(o);o+=1;const U=t.getUint8(o);o+=1;const m=t.getUint8(o);o+=1;const p=String.fromCharCode(...new Uint8Array(t.buffer,t.byteOffset+o,48)).replace(/\0+$/,"");o+=48;const d=t.getUint8(o);o+=1;const f=t.getUint8(o);return{...this.headerToFrame(s),packet_type:9,numPlayers:n,aiControlled:l,teamId:g,nationality:U,platform:m,name:p,carNumber:d,readyStatus:f}}decodeCarDamagePacket(t,r,s){const e=r+s.playerCarIndex*42;if(e+42>t.byteLength)return console.warn("F1 decoder: Car damage packet too small"),null;let n=e;const a=[],o=[],l=[];for(let h=0;h<4;h++)a.push(t.getFloat32(n,!0)),n+=4;for(let h=0;h<4;h++)o.push(t.getUint8(n)),n+=1;for(let h=0;h<4;h++)l.push(t.getUint8(n)),n+=1;const g=t.getUint8(n);n+=1;const U=t.getUint8(n);n+=1;const m=t.getUint8(n);n+=1;const p=t.getUint8(n);n+=1;const d=t.getUint8(n);n+=1;const f=t.getUint8(n);n+=1;const u=t.getUint8(n);n+=1;const F=t.getUint8(n);n+=1;const y=t.getUint8(n);n+=1;const S=t.getUint8(n);n+=1;const L=t.getUint8(n);n+=1;const T=t.getUint8(n);n+=1;const I=t.getUint8(n);n+=1;const R=t.getUint8(n);n+=1;const i=t.getUint8(n);n+=1;const C=t.getUint8(n);n+=1;const k=t.getUint8(n);n+=1;const P=t.getUint8(n);return{...this.headerToFrame(s),packet_type:10,tyresWear:a,tyresDamage:o,brakesDamage:l,frontLeftWingDamage:g,frontRightWingDamage:U,rearWingDamage:m,floorDamage:p,diffuserDamage:d,sidepodDamage:f,drsFault:u,ersFault:F,gearBoxDamage:y,engineDamage:S,engineMGUHWear:L,engineESWear:T,engineCEWear:I,engineICEWear:R,engineMGUKWear:i,engineTCWear:C,engineBlown:k,engineSeized:P}}decodeSessionHistoryPacket(t,r,s){let e=r;if(e+1431>t.byteLength)return console.warn("F1 decoder: Session history packet too small"),null;const n=t.getUint8(e);e+=1;const a=t.getUint8(e);e+=1;const o=t.getUint8(e);e+=1;const l=t.getUint8(e);e+=1;const g=t.getUint8(e);e+=1;const U=t.getUint8(e);e+=1;const m=t.getUint8(e);e+=1;const p=[];for(let u=0;u<100;u++)p.push({lapTimeInMS:t.getUint32(e,!0),sector1TimeMSPart:t.getUint16(e+4,!0),sector1TimeMinutesPart:t.getUint8(e+6),sector2TimeMSPart:t.getUint16(e+7,!0),sector2TimeMinutesPart:t.getUint8(e+9),sector3TimeMSPart:t.getUint16(e+10,!0),sector3TimeMinutesPart:t.getUint8(e+12),lapValidBitFlags:t.getUint8(e+13)}),e+=14;const d=[];for(let u=0;u<8;u++)d.push({endLap:t.getUint8(e),tyreActualCompound:t.getUint8(e+1),tyreVisualCompound:t.getUint8(e+2)}),e+=3;return{...this.headerToFrame(s),packet_type:11,carIdx:n,numLaps:a,numTyreStints:o,bestLapTimeLapNum:l,bestSector1LapNum:g,bestSector2LapNum:U,bestSector3LapNum:m,lapHistoryData:p,tyreStintsHistoryData:d}}decodeTyreSetsPacket(t,r,s){let e=r;if(e+202>t.byteLength)return console.warn("F1 decoder: Tyre sets packet too small"),null;const n=t.getUint8(e);e+=1;const a=[];for(let g=0;g<20;g++)a.push({actualTyreCompound:t.getUint8(e),visualTyreCompound:t.getUint8(e+1),wear:t.getUint8(e+2),available:t.getUint8(e+3),recommendedSession:t.getUint8(e+4),lifeSpan:t.getUint8(e+5),usableLife:t.getUint8(e+6),lapDeltaTime:t.getInt16(e+7,!0),fitted:t.getUint8(e+9)}),e+=10;const o=t.getUint8(e);return{...this.headerToFrame(s),packet_type:12,carIdx:n,tyreSetData:a,fittedIdx:o}}decodeMotionExPacket(t,r,s){let e=r;if(e+208>t.byteLength)return console.warn("F1 decoder: Motion ex packet too small"),null;const n=t.getFloat32(e,!0);e+=4;const a=t.getFloat32(e,!0);e+=4;const o=t.getFloat32(e,!0);e+=4;const l=t.getFloat32(e,!0);e+=4;const g=t.getFloat32(e,!0);e+=4;const U=t.getFloat32(e,!0);e+=4;const m=t.getFloat32(e,!0);e+=4;const p=t.getFloat32(e,!0);e+=4;const d=t.getFloat32(e,!0);e+=4;const f=t.getFloat32(e,!0);e+=4;const u=t.getFloat32(e,!0);e+=4;const F=t.getFloat32(e,!0);e+=4;const y=t.getFloat32(e,!0);e+=4;const S=t.getFloat32(e,!0);e+=4;const L=t.getFloat32(e,!0);e+=4;const T=t.getFloat32(e,!0);e+=4;const I=t.getFloat32(e,!0);e+=4;const R=t.getFloat32(e,!0);e+=4;const i=t.getFloat32(e,!0);e+=4;const C=t.getFloat32(e,!0);e+=4;const k=t.getFloat32(e,!0);e+=4;const P=t.getFloat32(e,!0);e+=4;const A=t.getFloat32(e,!0);e+=4;const h=t.getFloat32(e,!0);e+=4;const M=t.getFloat32(e,!0);e+=4;const b=t.getFloat32(e,!0);e+=4;const O=t.getFloat32(e,!0);e+=4;const E=t.getFloat32(e,!0);e+=4;const _=t.getFloat32(e,!0);e+=4;const x=t.getFloat32(e,!0);e+=4;const V=t.getFloat32(e,!0);e+=4;const N=t.getFloat32(e,!0);e+=4;const B=t.getFloat32(e,!0);e+=4;const W=t.getFloat32(e,!0);e+=4;const Y=t.getFloat32(e,!0);e+=4;const H=t.getFloat32(e,!0);e+=4;const G=t.getFloat32(e,!0);e+=4;const X=t.getFloat32(e,!0);e+=4;const Z=t.getFloat32(e,!0);e+=4;const j=t.getFloat32(e,!0);e+=4;const z=t.getFloat32(e,!0);e+=4;const K=t.getFloat32(e,!0);e+=4;const $=t.getFloat32(e,!0);e+=4;const q=t.getFloat32(e,!0);e+=4;const J=t.getFloat32(e,!0);e+=4;const Q=t.getFloat32(e,!0);e+=4;const w=t.getFloat32(e,!0);e+=4;const v=t.getFloat32(e,!0);e+=4;const tt=t.getFloat32(e,!0);e+=4;const et=t.getFloat32(e,!0);e+=4;const nt=t.getFloat32(e,!0);e+=4;const ot=t.getFloat32(e,!0);return{...this.headerToFrame(s),packet_type:13,suspensionPositionRL:n,suspensionPositionRR:a,suspensionPositionFL:o,suspensionPositionFR:l,suspensionVelocityRL:g,suspensionVelocityRR:U,suspensionVelocityFL:m,suspensionVelocityFR:p,suspensionAccelerationRL:d,suspensionAccelerationRR:f,suspensionAccelerationFL:u,suspensionAccelerationFR:F,wheelSpeedRL:y,wheelSpeedRR:S,wheelSpeedFL:L,wheelSpeedFR:T,wheelSlipRatioRL:I,wheelSlipRatioRR:R,wheelSlipRatioFL:i,wheelSlipRatioFR:C,wheelSlipAngleRL:k,wheelSlipAngleRR:P,wheelSlipAngleFL:A,wheelSlipAngleFR:h,wheelLatForceRL:M,wheelLatForceRR:b,wheelLatForceFL:O,wheelLatForceFR:E,wheelLongForceRL:_,wheelLongForceRR:x,wheelLongForceFL:V,wheelLongForceFR:N,heightOfCOGAboveGround:B,localVelocityX:W,localVelocityY:Y,localVelocityZ:H,angularVelocityX:G,angularVelocityY:X,angularVelocityZ:Z,angularAccelerationX:j,angularAccelerationY:z,angularAccelerationZ:K,frontWheelsAngle:$,wheelVertForceRL:q,wheelVertForceRR:J,wheelVertForceFL:Q,wheelVertForceFR:w,frontAeroHeight:v,rearAeroHeight:tt,frontRollAngle:et,rearRollAngle:nt,chassisYaw:ot}}decodeTimeTrialPacket(t,r,s){let e=r;if(e+24>t.byteLength)return console.warn("F1 decoder: Time trial packet too small"),null;const n=t.getUint8(e);e+=1;const a=t.getUint8(e);e+=1;const o=t.getUint32(e,!0);e+=4;const l=t.getUint32(e,!0);e+=4;const g=t.getUint32(e,!0);e+=4;const U=t.getUint32(e,!0);e+=4;const m=t.getUint8(e);e+=1;const p=t.getUint8(e);e+=1;const d=t.getUint8(e);e+=1;const f=t.getUint8(e);e+=1;const u=t.getUint8(e);e+=1;const F=t.getUint8(e);return{...this.headerToFrame(s),packet_type:14,carIdx:n,teamId:a,lapTimeInMS:o,sector1TimeInMS:l,sector2TimeInMS:g,sector3TimeInMS:U,tractionControl:m,gearboxAssist:p,antiLockBrakes:d,equalCarPerformance:f,customSetup:u,valid:F}}createBasicFrame(t){return{...this.headerToFrame(t),packet_type:t.packetId}}getPacketTypeName(t){switch(t){case 0:return"Motion";case 1:return"Session";case 2:return"Lap Data";case 3:return"Event";case 4:return"Participants";case 5:return"Car Setups";case 6:return"Car Telemetry";case 7:return"Car Status";case 8:return"Final Classification";case 9:return"Lobby Info";case 10:return"Car Damage";case 11:return"Session History";case 12:return"Tyre Sets";case 13:return"Motion Ex";case 14:return"Time Trial";default:return`Unknown_${t}`}}getSupportedPacketTypes(){return[{type:0,name:"Motion"},{type:1,name:"Session"},{type:2,name:"Lap Data"},{type:3,name:"Event"},{type:4,name:"Participants"},{type:5,name:"Car Setups"},{type:6,name:"Car Telemetry"},{type:7,name:"Car Status"},{type:8,name:"Final Classification"},{type:9,name:"Lobby Info"},{type:10,name:"Car Damage"},{type:11,name:"Session History"},{type:12,name:"Tyre Sets"},{type:13,name:"Motion Ex"},{type:14,name:"Time Trial"}]}getAcceptedPacketSizes(){return[1349,753,1285,45,1350,1133,1352,1239,1020,1306,953,1460,231,237,101]}}const Ot=new bt;export{Mt as F1PacketType,Ot as f1Decoder};
